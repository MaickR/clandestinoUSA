(()=>{"use strict";const e="[data-clandestino-gallery-grid]";let t,l,n,i=0,o=null,a=new Map,s=null;function c(e){t&&t.classList.contains("is-open")&&("Escape"===e.key?d():"ArrowRight"===e.key?u(1):"ArrowLeft"===e.key?u(-1):"Tab"===e.key&&function(e){const l=t.querySelectorAll("button, [href], img");if(!l.length)return;const n=l[0],i=l[l.length-1];e.shiftKey&&document.activeElement===n?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus())}(e))}function r(e,r){t||(t=document.createElement("div"),t.className="clx-lightbox",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-label","Image gallery viewer"),t.innerHTML='\n      <button class="clx-lightbox-close" aria-label="Close (Esc)">✕</button>\n      <button class="clx-lightbox-nav clx-lightbox-prev" aria-label="Previous image" title="Previous (Arrow Left)">‹</button>\n      <div class="clx-lightbox-stage">\n        <img alt="" />\n        <p class="clx-lightbox-caption" aria-live="polite"></p>\n      </div>\n      <button class="clx-lightbox-nav clx-lightbox-next" aria-label="Next image" title="Next (Arrow Right)">›</button>',document.body.appendChild(t),l=t.querySelector("img"),n=t.querySelector(".clx-lightbox-caption"),t.addEventListener("click",e=>{e.target===t&&d()}),t.querySelector(".clx-lightbox-close").addEventListener("click",d),t.querySelector(".clx-lightbox-prev").addEventListener("click",()=>u(-1)),t.querySelector(".clx-lightbox-next").addEventListener("click",()=>u(1)),document.addEventListener("keydown",c));a.get(e)&&(i=r,o=e,s=document.activeElement,y(),t.classList.add("is-open"),document.documentElement.classList.add("clx-lightbox-lock"),document.body.classList.add("clx-lightbox-lock"),setTimeout(()=>{t.querySelector(".clx-lightbox-close")?.focus()},30))}function d(){t&&(t.classList.remove("is-open"),document.documentElement.classList.remove("clx-lightbox-lock"),document.body.classList.remove("clx-lightbox-lock"),s&&s.focus&&s.focus())}function u(e){const t=a.get(o);t&&(i=(i+e+t.items.length)%t.items.length,y(!0))}function y(e){const t=a.get(o);if(!t)return;const s=t.items[i];s&&(e&&(l.classList.add("clx-fade-out"),setTimeout(()=>l.classList.remove("clx-fade-out"),240)),l.src=s.src,l.alt=s.alt||"",n.textContent=s.alt||"")}function v(){document.querySelectorAll("[data-clandestino-gallery-filter]").forEach(t=>{t.addEventListener("click",l=>{const n=l.target.closest("a[data-filter]");if(!n)return;l.preventDefault();const i=n.getAttribute("data-filter")||"*";t.querySelectorAll("a[data-filter]").forEach(e=>e.classList.toggle("active",e===n));const o=t.parentElement.querySelector(e);o&&function(e,t){const l=Array.from(e.children).filter(e=>e.classList.contains("clandestino-gallery-item")),n="*"===t||".all"===t,i=t.startsWith(".")?t.slice(1):t;l.forEach(e=>{n||e.classList.contains(i)?(e.classList.remove("is-filter-hidden"),e.style.display="block",requestAnimationFrame(()=>{e.style.opacity="1",e.style.transform="scale(1)"})):(e.classList.add("is-filter-hidden"),e.style.opacity="0",e.style.transform="scale(.94)",e.style.pointerEvents="none",setTimeout(()=>{e.classList.contains("is-filter-hidden")&&(e.style.display="none")},320))})}(o,i)})})}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(e).forEach((e,t)=>{const l="g"+t,n=e.querySelectorAll("a.clandestino-popup-gallery");if(!n.length)return;const i={id:l,items:[]};n.forEach((e,t)=>{const n=e.querySelector("img"),o=n?n.getAttribute("alt"):"";i.items.push({src:e.getAttribute("href"),alt:o}),e.setAttribute("data-gallery-group",l),e.setAttribute("data-gallery-index",String(t)),e.setAttribute("role","button"),e.setAttribute("aria-label",o?`View image: ${o}`:"View image"),e.addEventListener("click",e=>{e.preventDefault(),r(l,t)})}),a.set(l,i)}),v(),document.querySelectorAll(".clandestino-gallery-video-wrapper").forEach(e=>{const t=e.querySelector("video"),l=e.querySelector(".clandestino-gallery-video-overlay");t&&l&&(l.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.play()}),t.addEventListener("play",()=>{l.style.opacity="0",l.style.pointerEvents="none"}),t.addEventListener("pause",()=>{l.style.opacity="1",l.style.pointerEvents="auto"}),t.addEventListener("ended",()=>{l.style.opacity="1",l.style.pointerEvents="auto"}),l.style.opacity="1",l.style.pointerEvents="auto")}),document.querySelectorAll(".testi-card .video-wrap video").forEach(e=>{const t=e.closest(".video-wrap");if(!t)return;let l=t.querySelector(".video-overlay");l||(l=document.createElement("div"),l.className="video-overlay",l.innerHTML='<div class="video-play-btn"><ion-icon name="play" aria-hidden="true"></ion-icon></div>',t.appendChild(l)),l.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),e.play()}),e.addEventListener("play",()=>{l.style.opacity="0",l.style.pointerEvents="none"}),e.addEventListener("pause",()=>{l.style.opacity="1",l.style.pointerEvents="auto"}),e.addEventListener("ended",()=>{l.style.opacity="1",l.style.pointerEvents="auto"})})})})();